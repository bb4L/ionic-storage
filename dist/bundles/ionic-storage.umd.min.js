!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/core"),require("localforage"),require("localforage-cordovasqlitedriver")):"function"==typeof define&&define.amd?define("@ionic/storage",["exports","@angular/core","localforage","localforage-cordovasqlitedriver"],n):n((e.ionic=e.ionic||{},e.ionic.storage={}),e.ng.core,null,null)}(this,function(e,r,c,n){"use strict";var s={_driver:"webExtensionLocalStorage",_initStorage:function(){return Promise.resolve()},clear:function(r){return new Promise(function(n,e){chrome.storage.local.clear(function(e){r&&r(e),n(e)})})},getItem:function(r,t){return new Promise(function(n,e){chrome.storage.local.get(r,function(e){t&&t(null,e),n(e)})})},iterate:function(t,o){return new Promise(function(e,n){chrome.storage.local.get(null,function(r){r.forEach(function(e,n){return t(r[e],e,n)}),o&&o(null,r),e(r)})})},key:function(t,o){return new Promise(function(r,e){chrome.storage.local.get(null,function(e){var n=e.keys()[t];o&&o(null,n),r(e)})})},keys:function(r){return new Promise(function(n,e){chrome.storage.local.get(null,function(e){r&&r(null,e),n(e)})})},length:function(r){return new Promise(function(n,e){chrome.storage.local.get(null,function(e){r&&r(null,e.keys.length),n(e.keys.length)})})},removeItem:function(r,t){return new Promise(function(n,e){chrome.storage.local.remove(r,function(e){t&&t(e),n(e)})})},setItem:function(e,r,t){return new Promise(function(n,e){chrome.storage.local.set({key:r},function(e){t&&t(null,e),n(e)})})}},t=function(){function e(i){var u=this;this._driver=null,this._dbPromise=new Promise(function(e,n){var r,t={name:"_ionicstorage",storeName:"_ionickv",dbKey:"_ionickey",driverOrder:["sqlite","indexeddb","websql","localstorage"]},o=Object.assign(t,i||{});c.defineDriver(s).then(function(){r=c.createInstance(o)}).then(function(){return r.setDriver(u._getDriverOrder(o.driverOrder))}).then(function(){u._driver=r.driver(),e(r)})["catch"](function(e){return n(e)})})}return Object.defineProperty(e.prototype,"driver",{get:function(){return this._driver},enumerable:!0,configurable:!0}),e.prototype.ready=function(){return this._dbPromise},e.prototype._getDriverOrder=function(e){return e.map(function(e){switch(e){case"sqlite":return n._driver;case"indexeddb":return c.INDEXEDDB;case"websql":return c.WEBSQL;case"localstorage":return c.LOCALSTORAGE;case"webExtensionLocalStorage":return s._driver}})},e.prototype.get=function(n){return this._dbPromise.then(function(e){return e.getItem(n)})},e.prototype.set=function(n,r){return this._dbPromise.then(function(e){return e.setItem(n,r)})},e.prototype.remove=function(n){return this._dbPromise.then(function(e){return e.removeItem(n)})},e.prototype.clear=function(){return this._dbPromise.then(function(e){return e.clear()})},e.prototype.length=function(){return this._dbPromise.then(function(e){return e.length()})},e.prototype.keys=function(){return this._dbPromise.then(function(e){return e.keys()})},e.prototype.forEach=function(n){return this._dbPromise.then(function(e){return e.iterate(n)})},e}();var o=new r.InjectionToken("STORAGE_CONFIG_TOKEN");function i(e){return new t(e||{name:"_ionicstorage",storeName:"_ionickv",dbKey:"_ionickey",driverOrder:["sqlite","indexeddb","websql","localstorage"]})}var u=function(){function n(){}return n.forRoot=function(e){return void 0===e&&(e=null),{ngModule:n,providers:[{provide:o,useValue:e},{provide:t,useFactory:i,deps:[o]}]}},n.decorators=[{type:r.NgModule}],n}();e.StorageConfigToken=o,e.Storage=t,e.IonicStorageModule=u,e.Éµa=i,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ionic-storage.umd.min.js.map