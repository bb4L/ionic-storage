!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("@angular/core"),require("localforage"),require("localforage-cordovasqlitedriver")):"function"==typeof define&&define.amd?define("@ionic/storage",["exports","@angular/core","localforage","localforage-cordovasqlitedriver"],r):r((e.ionic=e.ionic||{},e.ionic.storage={}),e.ng.core,null,null)}(this,function(e,n,c,r){"use strict";var s={_driver:"webExtensionLocalStorage",_initStorage:function(){return Promise.resolve()},clear:function(n){return new Promise(function(r,e){chrome.storage.local.clear(function(e){n&&n(e),r(e)})})},getItem:function(t,o){return new Promise(function(n,e){chrome.storage.local.get(t,function(e){var r="string"==typeof t?e[t]:e;o&&o(null,r),n(r)})})},iterate:function(t,o){return new Promise(function(e,r){chrome.storage.local.get(null,function(n){n.forEach(function(e,r){return t(n[e],e,r)}),o&&o(null,n),e(n)})})},key:function(t,o){return new Promise(function(n,e){chrome.storage.local.get(null,function(e){var r=e.keys()[t];o&&o(null,r),n(e)})})},keys:function(n){return new Promise(function(r,e){chrome.storage.local.get(null,function(e){n&&n(null,e),r(e)})})},length:function(n){return new Promise(function(r,e){chrome.storage.local.get(null,function(e){n&&n(null,e.keys.length),r(e.keys.length)})})},removeItem:function(n,t){return new Promise(function(r,e){chrome.storage.local.remove(n,function(e){t&&t(e),r(e)})})},setItem:function(t,o,i){return new Promise(function(r,e){var n={};n[t]=o,chrome.storage.local.set(n,function(e){i&&i(null,e),r(e)})})}},t=function(){function e(i){var u=this;this._driver=null,this._dbPromise=new Promise(function(e,r){var n,t={name:"_ionicstorage",storeName:"_ionickv",dbKey:"_ionickey",driverOrder:["sqlite","indexeddb","websql","localstorage"]},o=Object.assign(t,i||{});c.defineDriver(s).then(function(){n=c.createInstance(o)}).then(function(){return n.setDriver(u._getDriverOrder(o.driverOrder))}).then(function(){u._driver=n.driver(),e(n)})["catch"](function(e){return r(e)})})}return Object.defineProperty(e.prototype,"driver",{get:function(){return this._driver},enumerable:!0,configurable:!0}),e.prototype.ready=function(){return this._dbPromise},e.prototype._getDriverOrder=function(e){return e.map(function(e){switch(e){case"sqlite":return r._driver;case"indexeddb":return c.INDEXEDDB;case"websql":return c.WEBSQL;case"localstorage":return c.LOCALSTORAGE;case"webExtensionLocalStorage":return s._driver}})},e.prototype.get=function(r){return this._dbPromise.then(function(e){return e.getItem(r)})},e.prototype.set=function(r,n){return this._dbPromise.then(function(e){return e.setItem(r,n)})},e.prototype.remove=function(r){return this._dbPromise.then(function(e){return e.removeItem(r)})},e.prototype.clear=function(){return this._dbPromise.then(function(e){return e.clear()})},e.prototype.length=function(){return this._dbPromise.then(function(e){return e.length()})},e.prototype.keys=function(){return this._dbPromise.then(function(e){return e.keys()})},e.prototype.forEach=function(r){return this._dbPromise.then(function(e){return e.iterate(r)})},e}();var o=new n.InjectionToken("STORAGE_CONFIG_TOKEN");function i(e){return new t(e||{name:"_ionicstorage",storeName:"_ionickv",dbKey:"_ionickey",driverOrder:["sqlite","indexeddb","websql","localstorage"]})}var u=function(){function r(){}return r.forRoot=function(e){return void 0===e&&(e=null),{ngModule:r,providers:[{provide:o,useValue:e},{provide:t,useFactory:i,deps:[o]}]}},r.decorators=[{type:n.NgModule}],r}();e.StorageConfigToken=o,e.Storage=t,e.IonicStorageModule=u,e.Éµa=i,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ionic-storage.umd.min.js.map